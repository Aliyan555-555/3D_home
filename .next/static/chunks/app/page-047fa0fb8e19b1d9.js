(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4956:function(e,r,t){Promise.resolve().then(t.bind(t,6774))},6774:function(e,r,t){"use strict";t.r(r);var n=t(7437),s=t(2265),o=t(9238);t(6181),t(8347),r.default=()=>{let e=(0,s.useRef)(null),r=(0,s.useRef)(null),t=(0,s.useRef)(null),[a,l]=(0,s.useState)(2),[c,u]=(0,s.useState)(!0),[d,h]=(0,s.useState)(!1),[p,g]=(0,s.useState)(null),[f,x]=(0,s.useState)({x:0,z:0}),m=()=>{let t=new o.Scene(r.current),n=new o.ArcRotateCamera("Camera",Math.PI/2,Math.PI/2,110,o.Vector3.Zero(),t);n.attachControl(e.current,!0),n.inputs.attached.mousewheel.detachControl(),n.inertia=.5,n.angularSensibilityX=500,n.angularSensibilityY=500,n.wheelDeltaPercentage=-1,new o.HemisphericLight("ambientLight",new o.Vector3(0,1,0),t).intensity=.5;let s=new o.DirectionalLight("light",new o.Vector3(0,-1,0),t);s.position=new o.Vector3(0,10,0),s.intensity=1;let i=o.MeshBuilder.CreateBox("placeholderSkyBox",{size:1e3},t),a=new o.StandardMaterial("placeholderSkyBox",t);return a.backFaceCulling=!1,a.diffuseColor=new o.Color3(.5,.5,.5),a.specularColor=new o.Color3(0,0,0),i.material=a,g(i),t.registerBeforeRender(()=>{let e=n.position;x({x:e.x,z:e.z})}),t},w=async e=>{h(!0);let r=new o.CubeTexture("/images/point".concat(e,"/"),t.current,["_px.jpg","_nx.jpg","_py.jpg","_ny.jpg","_pz.jpg","_nz.jpg"]);await new Promise(e=>{r.onLoadObservable.add(()=>{e()})});let n=o.MeshBuilder.CreateBox("skyBox",{size:1e3},t.current),s=new o.StandardMaterial("skyBox",t.current);return s.backFaceCulling=!1,s.reflectionTexture=r,s.reflectionTexture.coordinatesMode=o.Texture.SKYBOX_MODE,s.diffuseColor=new o.Color3(0,0,0),s.specularColor=new o.Color3(0,0,0),n.material=s,p&&(p.dispose(),g(null)),h(!1),n};return(0,s.useEffect)(()=>(r.current=new o.Engine(e.current,!0),t.current=m(),w(a).then(()=>{u(!1)}),r.current.runRenderLoop(()=>{t.current.render()}),window.addEventListener("resize",()=>{r.current.resize()}),()=>{window.removeEventListener("resize",()=>r.current.resize()),r.current.dispose()}),[]),(0,s.useEffect)(()=>{t.current&&!c&&(t.current.meshes.forEach(e=>{"skyBox"===e.name&&e.dispose()}),w(a))},[a]),(0,n.jsxs)("div",{children:[(0,n.jsx)("canvas",{ref:e,style:{width:"100%",height:"100vh"}}),c&&(0,n.jsx)("div",{className:"w-screen h-screen fixed top-0 left-0",children:(0,n.jsx)("img",{className:"w-screen object-cover h-screen",src:"/images/UI/splashscreen.jpg",alt:"splashscreen"})}),d&&(0,n.jsx)("div",{className:"fixed top-0 flex items-center justify-center left-0 w-screen bg-no-repeat bg-cover h-screen ",style:{backgroundImage:"url(/images/UI/splashscreen.jpg)"},children:(0,n.jsx)("img",{className:"animate-spin",src:"/images/UI/loading.png",alt:"LOADING"})}),(0,n.jsx)("div",{style:{position:"absolute",top:10,left:10},children:Array.from({length:9},(e,r)=>(0,n.jsxs)("button",{onClick:()=>l(r+1),children:["Point ",r+1]},r+1))}),(0,n.jsx)(i,{url:"/images/UI/minimap.png",cursor:"/images/UI/user.png",offsetX:0,offsetY:0,scale:1,currentPosition:f})]})};let i=e=>{let{url:r,cursor:t,currentPosition:o,scale:i=1,offsetX:a=0,offsetY:l=0}=e,c=(0,s.useRef)(null),[u,d]=(0,s.useState)({transform:"rotate(0rad)"}),[h,p]=(0,s.useState)(1);(0,s.useEffect)(()=>{if(c.current){let{transform:e}=g(o);d({transform:e})}},[o]),console.log(h);let g=e=>{let r=(e.x+a)*i,t=(-e.z+l)*i;return{transform:"rotate(".concat(r+t,"rad)")}},f=e=>{p(e)};return(0,n.jsxs)("div",{ref:c,style:{position:"absolute",width:"200px",height:"200px",backgroundImage:"url(".concat(r,")"),backgroundSize:"cover",right:"10px",bottom:"10px",border:"2px solid #000"},children:[(0,n.jsx)("div",{style:{position:"absolute",width:"40px",height:"40px",backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",...u}}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:()=>f(1),children:"Floor 1"}),(0,n.jsx)("button",{onClick:()=>f(2),children:"Floor 2"})]})]})}}},function(e){e.O(0,[283,264,534,971,23,744],function(){return e(e.s=4956)}),_N_E=e.O()}]);